# openAPI schema part2 for compute.cnrm.cloud.google.com.v1beta1.ComputeURLMap

## schema

```yaml
properties:
  spec:
    properties:
      defaultRouteAction:
        properties:
          corsPolicy:
            description: |-
              The specification for allowing client side cross-origin requests. Please see
              [W3C Recommendation for Cross Origin Resource Sharing](https://www.w3.org/TR/cors/).
            properties:
              allowCredentials:
                description: |-
                  In response to a preflight request, setting this to true indicates that the actual request can include user credentials. This field translates to the Access-Control-Allow-Credentials header.
                  Default is false.
                type: boolean
              allowHeaders:
                description: Specifies the content for the Access-Control-Allow-Headers
                  header.
                items:
                  type: string
                type: array
              allowMethods:
                description: Specifies the content for the Access-Control-Allow-Methods
                  header.
                items:
                  type: string
                type: array
              allowOriginRegexes:
                description: |-
                  Specifies the regualar expression patterns that match allowed origins. For regular expression grammar
                  please see en.cppreference.com/w/cpp/regex/ecmascript
                  An origin is allowed if it matches either an item in allowOrigins or an item in allowOriginRegexes.
                items:
                  type: string
                type: array
              allowOrigins:
                description: |-
                  Specifies the list of origins that will be allowed to do CORS requests.
                  An origin is allowed if it matches either an item in allowOrigins or an item in allowOriginRegexes.
                items:
                  type: string
                type: array
              disabled:
                description: If true, the setting specifies the CORS policy is disabled.
                  The default value of false, which indicates that the CORS policy
                  is in effect.
                type: boolean
              exposeHeaders:
                description: Specifies the content for the Access-Control-Expose-Headers
                  header.
                items:
                  type: string
                type: array
              maxAge:
                description: |-
                  Specifies how long results of a preflight request can be cached in seconds.
                  This translates to the Access-Control-Max-Age header.
                type: integer
            type: object
          defaultRouteAction:
            description: |-
              defaultRouteAction takes effect when none of the hostRules match. The load balancer performs advanced routing actions, such as URL rewrites and header transformations, before forwarding the request to the selected backend. If defaultRouteAction specifies any weightedBackendServices, defaultService must not be set. Conversely if defaultService is set, defaultRouteAction cannot contain any weightedBackendServices.
              Only one of defaultRouteAction or defaultUrlRedirect must be set.
              URL maps for Classic external HTTP(S) load balancers only support the urlRewrite action within defaultRouteAction.
              defaultRouteAction has no effect when the URL map is bound to a target gRPC proxy that has the validateForProxyless field set to true.
            type: object
          faultInjectionPolicy:
            description: |-
              The specification for fault injection introduced into traffic to test the resiliency of clients to backend service failure.
              As part of fault injection, when clients send requests to a backend service, delays can be introduced by a load balancer on a percentage of requests before sending those requests to the backend service.
              Similarly requests from clients can be aborted by the load balancer for a percentage of requests.
              timeout and retryPolicy is ignored by clients that are configured with a faultInjectionPolicy if: 1. The traffic is generated by fault injection AND 2. The fault injection is not a delay fault injection.
              Fault injection is not supported with the global external HTTP(S) load balancer (classic). To see which load balancers support fault injection, see Load balancing: [Routing and traffic management features](https://cloud.google.com/load-balancing/docs/features#routing-traffic-management).
            properties:
              abort:
                description: The specification for how client requests are aborted
                  as part of fault injection.
                properties:
                  httpStatus:
                    description: |-
                      The HTTP status code used to abort the request.
                      The value must be between 200 and 599 inclusive.
                    type: integer
                  percentage:
                    description: |-
                      The percentage of traffic (connections/operations/requests) which will be aborted as part of fault injection.
                      The value must be between 0.0 and 100.0 inclusive.
                    type: number
                type: object
              delay:
                description: The specification for how client requests are delayed
                  as part of fault injection, before being sent to a backend service.
                properties:
                  fixedDelay:
                    description: Specifies the value of the fixed delay interval.
                    properties:
                      nanos:
                        description: |-
                          Span of time that's a fraction of a second at nanosecond resolution. Durations less than one second are
                          represented with a 0 seconds field and a positive nanos field. Must be from 0 to 999,999,999 inclusive.
                        type: integer
                      seconds:
                        description: |-
                          Span of time at a resolution of a second. Must be from 0 to 315,576,000,000 inclusive.
                          Note: these bounds are computed from: 60 sec/min * 60 min/hr * 24 hr/day * 365.25 days/year * 10000 years.
                        type: string
                    type: object
                  percentage:
                    description: |-
                      The percentage of traffic (connections/operations/requests) on which delay will be introduced as part of fault injection.
                      The value must be between 0.0 and 100.0 inclusive.
                    type: number
                type: object
            type: object
          requestMirrorPolicy:
            description: |-
              Specifies the policy on how requests intended for the route's backends are shadowed to a separate mirrored backend service.
              The load balancer does not wait for responses from the shadow service. Before sending traffic to the shadow service, the host / authority header is suffixed with -shadow.
              Not supported when the URL map is bound to a target gRPC proxy that has the validateForProxyless field set to true.
            properties:
              backendServiceRef:
                description: |-
                  The backend service resource being mirrored to.
                  The backend service configured for a mirroring policy must reference
                  backends that are of the same type as the original backend service
                  matched in the URL map.
                  Serverless NEG backends are not currently supported as a mirrored
                  backend service.
                oneOf:
                - not:
                    required:
                    - external
                  required:
                  - name
                - not:
                    anyOf:
                    - required:
                      - name
                    - required:
                      - namespace
                  required:
                  - external
                properties:
                  external:
                    description: 'Allowed value: The `selfLink` field of a `ComputeBackendService`
                      resource.'
                    type: string
                  name:
                    description: 'Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                    type: string
                  namespace:
                    description: 'Namespace of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/'
                    type: string
                type: object
            type: object
          retryPolicy:
            description: Specifies the retry policy associated with this route.
            properties:
              numRetries:
                description: Specifies the allowed number retries. This number must
                  be > 0. If not specified, defaults to 1.
                type: integer
              perTryTimeout:
                description: |-
                  Specifies a non-zero timeout per retry attempt.

                  If not specified, will use the timeout set in HttpRouteAction. If timeout in HttpRouteAction is not set,
                  will use the largest timeout among all backend services associated with the route.
                properties:
                  nanos:
                    description: |-
                      Span of time that's a fraction of a second at nanosecond resolution. Durations less than one second are
                      represented with a 0 seconds field and a positive nanos field. Must be from 0 to 999,999,999 inclusive.
                    type: integer
                  seconds:
                    description: |-
                      Span of time at a resolution of a second. Must be from 0 to 315,576,000,000 inclusive.
                      Note: these bounds are computed from: 60 sec/min * 60 min/hr * 24 hr/day * 365.25 days/year * 10000 years.
                    type: string
                type: object
              retryConditions:
                description: |-
                  Specifies one or more conditions when this retry policy applies.
                  Valid values are listed below. Only the following codes are supported when the URL map is bound to target gRPC proxy that has validateForProxyless field set to true: cancelled, deadline-exceeded, internal, resource-exhausted, unavailable.
                    - 5xx : retry is attempted if the instance or endpoint responds with any 5xx response code, or if the instance or endpoint does not respond at all. For example, disconnects, reset, read timeout, connection failure, and refused streams.
                    - gateway-error : Similar to 5xx, but only applies to response codes 502, 503 or 504.
                    - connect-failure : a retry is attempted on failures connecting to the instance or endpoint. For example, connection timeouts.
                    - retriable-4xx : a retry is attempted if the instance or endpoint responds with a 4xx response code. The only error that you can retry is error code 409.
                    - refused-stream : a retry is attempted if the instance or endpoint resets the stream with a REFUSED_STREAM error code. This reset type indicates that it is safe to retry.
                    - cancelled : a retry is attempted if the gRPC status code in the response header is set to cancelled.
                    - deadline-exceeded : a retry is attempted if the gRPC status code in the response header is set to deadline-exceeded.
                    - internal :  a retry is attempted if the gRPC status code in the response header is set to internal.
                    - resource-exhausted : a retry is attempted if the gRPC status code in the response header is set to resource-exhausted.
                    - unavailable : a retry is attempted if the gRPC status code in the response header is set to unavailable.
                items:
                  type: string
                type: array
            type: object
          timeout:
            description: |-
              Specifies the timeout for the selected route. Timeout is computed from the time the request has been fully processed (known as end-of-stream) up until the response has been processed. Timeout includes all retries.
              If not specified, this field uses the largest timeout among all backend services associated with the route.
              Not supported when the URL map is bound to a target gRPC proxy that has validateForProxyless field set to true.
            properties:
              nanos:
                description: Span of time that's a fraction of a second at nanosecond
                  resolution. Durations less than one second are represented with
                  a 0 seconds field and a positive nanos field. Must be from 0 to
                  999,999,999 inclusive.
                type: integer
              seconds:
                description: 'Span of time at a resolution of a second. Must be from
                  0 to 315,576,000,000 inclusive. Note: these bounds are computed
                  from: 60 sec/min * 60 min/hr * 24 hr/day * 365.25 days/year * 10000
                  years.'
                type: string
            type: object
          urlRewrite:
            description: |-
              The spec to modify the URL of the request, before forwarding the request to the matched service.
              urlRewrite is the only action supported in UrlMaps for external HTTP(S) load balancers.
              Not supported when the URL map is bound to a target gRPC proxy that has the validateForProxyless field set to true.
            properties:
              hostRewrite:
                description: |-
                  Before forwarding the request to the selected service, the request's host header is replaced with contents of hostRewrite.
                  The value must be from 1 to 255 characters.
                type: string
              pathPrefixRewrite:
                description: |-
                  Before forwarding the request to the selected backend service, the matching portion of the request's path is replaced by pathPrefixRewrite.
                  The value must be from 1 to 1024 characters.
                type: string
            type: object
          weightedBackendServices:
            description: |-
              A list of weighted backend services to send traffic to when a route match occurs. The weights determine the fraction of traffic that flows to their corresponding backend service. If all traffic needs to go to a single backend service, there must be one weightedBackendService with weight set to a non-zero number.
              After a backend service is identified and before forwarding the request to the backend service, advanced routing actions such as URL rewrites and header transformations are applied depending on additional settings specified in this HttpRouteAction.
            items:
              properties:
                backendServiceRef:
                  description: |-
                    The default backend service resource.
                    Before forwarding the request to backendService, the loadbalancer
                    applies any relevant headerActions specified as part of this
                    backendServiceWeight.
                  oneOf:
                  - not:
                      required:
                      - external
                    required:
                    - name
                  - not:
                      anyOf:
                      - required:
                        - name
                      - required:
                        - namespace
                    required:
                    - external
                  properties:
                    external:
                      description: 'Allowed value: The `selfLink` field of a `ComputeBackendService`
                        resource.'
                      type: string
                    name:
                      description: 'Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                      type: string
                    namespace:
                      description: 'Namespace of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/'
                      type: string
                  type: object
                headerAction:
                  description: |-
                    Specifies changes to request and response headers that need to take effect for the selected backendService.
                    headerAction specified here take effect before headerAction in the enclosing HttpRouteRule, PathMatcher and UrlMap.
                    headerAction is not supported for load balancers that have their loadBalancingScheme set to EXTERNAL.
                    Not supported when the URL map is bound to a target gRPC proxy that has validateForProxyless field set to true.
                  properties:
                    requestHeadersToAdd:
                      description: Headers to add to a matching request before forwarding
                        the request to the backendService.
                      items:
                        properties:
                          headerName:
                            description: The name of the header.
                            type: string
                          headerValue:
                            description: The value of the header to add.
                            type: string
                          replace:
                            description: |-
                              If false, headerValue is appended to any values that already exist for the header. If true, headerValue is set for the header, discarding any values that were set for that header.
                              The default value is false.
                            type: boolean
                        type: object
                      type: array
                    requestHeadersToRemove:
                      description: A list of header names for headers that need to
                        be removed from the request before forwarding the request
                        to the backendService.
                      items:
                        type: string
                      type: array
                    responseHeadersToAdd:
                      description: Headers to add the response before sending the
                        response back to the client.
                      items:
                        properties:
                          headerName:
                            description: The name of the header.
                            type: string
                          headerValue:
                            description: The value of the header to add.
                            type: string
                          replace:
                            description: |-
                              If false, headerValue is appended to any values that already exist for the header. If true, headerValue is set for the header, discarding any values that were set for that header.
                              The default value is false.
                            type: boolean
                        type: object
                      type: array
                    responseHeadersToRemove:
                      description: A list of header names for headers that need to
                        be removed from the response before sending the response back
                        to the client.
                      items:
                        type: string
                      type: array
                  type: object
                weight:
                  description: |-
                    Specifies the fraction of traffic sent to a backend service, computed as weight / (sum of all weightedBackendService weights in routeAction) .
                    The selection of a backend service is determined only for new traffic. Once a user's request has been directed to a backend service, subsequent requests are sent to the same backend service as determined by the backend service's session affinity policy.
                    The value must be from 0 to 1000.
                  type: integer
              type: object
            type: array
required:
- spec
type: object

```
